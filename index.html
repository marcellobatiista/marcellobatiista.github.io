<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Blog e portfólio de Marcelo Batista. Artigos sobre tecnologia, desenvolvimento e reflexões sobre a vida.">
    <meta name="keywords" content="blog, portfólio, tecnologia, desenvolvimento, reflexões, Marcelo Batista">
    <meta name="author" content="Marcelo Batista">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://marcellobatiista.github.io/">
    <meta property="og:title" content="Marcelo Batista | Blog e Portfólio">
    <meta property="og:description" content="Blog e portfólio pessoal com artigos sobre tecnologia e desenvolvimento.">
    <meta property="og:image" content="static/images/sci-fi.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://marcellobatiista.github.io/">
    <meta property="twitter:title" content="Marcelo Batista | Blog e Portfólio">
    <meta property="twitter:description" content="Blog e portfólio pessoal com artigos sobre tecnologia e desenvolvimento.">
    <meta property="twitter:image" content="static/images/sci-fi.png">

    <link rel="icon" href="static/favicon.ico" type="image/x-icon">
    <title>Marcelo Batista | Blog e Portfólio</title>

    <!-- Bootstrap Icons (CDN) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    
    <!-- CSS -->
    <link rel="stylesheet" href="static/styles/index.css">
    <link rel="stylesheet" href="static/styles/post.css">
</head>
<body>
<!-- CABEÇALHO PRINCIPAL -->
<header class="main-header"></header>

<!-- WRAPPER (SIDEBAR + CONTEÚDO) -->
<main class="wrapper">

    <!-- SIDEBAR -->
    <div class="sidebar" id="sidebar">
        <!-- Botão dentro da sidebar -->
        <button class="toggle-button" id="toggleBtn" onclick="toggleSidebar()">«</button>

        <div class="sidebar-content">
            <!-- Conteúdo principal da sidebar -->
            <div class="sidebar-main">
                <div class="sidebar-top">
                    <a href="#">
                        <div class="menu-item portfolio">
                            <i class="bi bi-collection"></i>
                            <span>Projetos</span>
                        </div>
                    </a>
                    <div class="menu-item docs" onclick="toggleDocs(event)">
                        <i class="bi bi-book"></i>
                        <span>Docs</span>
                        <i class="bi bi-chevron-down docs-arrow"></i>
                    </div>
                    <div class="docs-list" id="docsList">
                        <div class="menu-item submenu" onclick="toggleSubmenu(event)">
                            <i class="bi bi-journal-text"></i>
                            <span>Alguns pensamentos</span>
                            <i class="bi bi-chevron-down submenu-arrow"></i>
                        </div>
                        <div class="submenu-list" id="submenuList">
                            <a href="#" onclick="loadPost('voce-e-livre-ou-so-esta-bem-programado.html')">
                                <div class="docs-item">
                                    <span>Você é livre ou só está bem programado?</span>
                                </div>
                            </a>
                            <a href="#" onclick="loadPost('voce-pensa-ou-so-repete.html')">
                                <div class="docs-item">
                                    <span>Você pensa… ou só repete?</span>
                                </div>
                            </a>
                            <a href="#" onclick="loadPost('a-armadilha-da-produtividade-vazia.html')">
                                <div class="docs-item">
                                    <span>A armadilha da produtividade vazia</span>
                                </div>
                            </a>
                            <a href="#" onclick="loadPost('por-que-o-silencio-te-assusta.html')">
                                <div class="docs-item">
                                    <span>Por que o silêncio te assusta?</span>
                                </div>
                            </a>
                            <a href="#" onclick="loadPost('consciencia-e-o-novo-codigo-fonte.html')">
                                <div class="docs-item">
                                    <span>Consciência é o novo código-fonte</span>
                                </div>
                            </a>
                            <a href="#" onclick="loadPost('autoconhecimento-nao-vende.html')">
                                <div class="docs-item">
                                    <span>Autoconhecimento não vende, por isso ninguém te ensina</span>
                                </div>
                            </a>
                        </div>
                    </div>
                    <a href="https://github.com/marcellobatiista" target="_blank" rel="noopener noreferrer">
                        <div class="menu-item github">
                            <i class="bi bi-github"></i>
                            <span>GitHub</span>
                        </div>
                    </a>
                    <a href="https://t.me/SP4CNE" target="_blank" rel="noopener noreferrer">
                        <div class="menu-item contato">
                            <i class="bi bi-telegram"></i>
                            <span>Contato</span>
                        </div>
                    </a>
                </div>
            </div>

            <!-- Rodapé da Sidebar -->
            <div class="sidebar-bottom">
                <a href="https://link.mercadopago.com.br/doarumcafe" target="_blank" rel="noopener noreferrer">Doar um Café ☕️</a>
            </div>
        </div>
    </div>

    <!-- CONTEÚDO PRINCIPAL -->
    <div class="main-content">
        <div class="main-body">
            <div id="post-content"></div>
        </div>
        <!-- Agora, só uma frase no rodapé -->
        <div class="main-footer">
            Observe atentamente e descubra a verdade em si mesmo.
        </div>
    </div>

</main>

<!-- SCRIPT -->
<script>
    function toggleSidebar() {
        const sidebar = document.getElementById("sidebar");
        const toggleBtn = document.getElementById("toggleBtn");
        const mainContent = document.querySelector(".main-content");
        const docsMenu = document.querySelector('.menu-item.docs');
        const docsList = document.getElementById('docsList');

        if (window.innerWidth <= 768) {
            // Em telas pequenas, a lógica é mostrar/esconder com ".show"
            if (sidebar.classList.contains("show")) {
                sidebar.classList.remove("show");
                sidebar.classList.remove("collapsed");
                toggleBtn.textContent = "»";
            } else {
                sidebar.classList.add("show");
                toggleBtn.textContent = "«";
            }
        } else {
            // Em telas grandes, a lógica é expandir/recolher com ".collapsed"
            sidebar.classList.toggle("collapsed");
            sidebar.classList.remove("show");
            mainContent.classList.toggle("sidebar-collapsed");
            
            // Se a sidebar estiver colapsada, esconde a lista de Docs
            if (sidebar.classList.contains("collapsed")) {
                toggleBtn.textContent = "»";
                docsMenu.classList.remove("expanded");
                docsList.classList.remove("show");
            } else {
                toggleBtn.textContent = "«";
            }
        }
    }

    // Função para garantir que o botão e a sidebar estejam sincronizados ao carregar/redimensionar
    function syncSidebarToggleBtn() {
        const sidebar = document.getElementById("sidebar");
        const toggleBtn = document.getElementById("toggleBtn");
        if (!sidebar || !toggleBtn) return;
        if (window.innerWidth <= 768) {
            // Mobile: sidebar começa oculta, seta para expandir
            sidebar.classList.remove("show");
            sidebar.classList.remove("collapsed");
            toggleBtn.textContent = "»";
        } else {
            // Desktop: sidebar começa expandida, seta para recolher
            sidebar.classList.remove("show");
            sidebar.classList.remove("collapsed");
            toggleBtn.textContent = "«";
            const mainContent = document.querySelector(".main-content");
            if (mainContent) mainContent.classList.remove("sidebar-collapsed");
        }
    }

    // Função para expandir/recolher a lista de posts
    function toggleDocs(event) {
        event.preventDefault();
        event.stopPropagation();
        
        const docsMenu = document.querySelector('.menu-item.docs');
        const docsList = document.getElementById('docsList');
        
        // Toggle das classes
        docsMenu.classList.toggle('expanded');
        docsList.classList.toggle('show');
    }

    // Função para expandir/recolher o submenu
    function toggleSubmenu(event) {
        event.preventDefault();
        event.stopPropagation();
        
        const submenu = document.querySelector('.menu-item.submenu');
        const submenuList = document.getElementById('submenuList');
        
        // Toggle das classes
        submenu.classList.toggle('expanded');
        submenuList.classList.toggle('show');
    }

    // Função para carregar um post
    function loadPost(postFile) {
        // Remove a classe 'active' de todos os itens do menu
        document.querySelectorAll('.docs-item').forEach(item => {
            item.classList.remove('active');
        });

        // Se o clique veio do menu lateral, marca como ativo
        const clickedItem = event.currentTarget.querySelector('.docs-item');
        if (clickedItem) {
            clickedItem.classList.add('active');
        }

        fetch(`templates/posts/${postFile}`)
            .then(response => response.text())
            .then(html => {
                document.getElementById('post-content').innerHTML = html;
                // Fecha a sidebar em mobile após clicar em um post
                if (window.innerWidth <= 768) {
                    const sidebar = document.getElementById("sidebar");
                    const toggleBtn = document.getElementById("toggleBtn");
                    sidebar.classList.remove("show");
                    toggleBtn.textContent = "»";
                }
            })
            .catch(error => {
                console.error('Erro ao carregar o post:', error);
            });
    }

    // Sincroniza ao carregar e ao redimensionar
    window.addEventListener('DOMContentLoaded', syncSidebarToggleBtn);
    window.addEventListener('resize', syncSidebarToggleBtn);

    // Carrega o conteúdo do post via fetch
    fetch('templates/posts/post1.html')
        .then(response => response.text())
        .then(html => {
            document.getElementById('post-content').innerHTML = html;
        })
        .catch(error => {
            console.error('Erro ao carregar o post:', error);
        });
</script>
</body>
</html>
